---
name: '–ü—Ä–µ—Ä–µ–Ω–¥–µ—Ä'
permalink: '/cli/pre-rendering'
description: '–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–º–æ—â—å—é Preact CLI.'
---

# –ü—Ä–µ—Ä–µ–Ω–¥–µ—Ä

–ü—Ä–∏ —Å–±–æ—Ä–∫–µ production-–∫–æ–¥–∞, Preact CLI —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π HTML, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–∏ –í–∞—à–µ–≥–æ —Å–∞–π—Ç–∞ –±—É–¥—É—Ç –≤–∏–¥–µ—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ JavaScript.

> **‚ö†Ô∏è –í–∞–∂–Ω–æ:** –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏ Node.js, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –º–Ω–æ–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Web API. –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –º–æ–∂–Ω–æ –æ–±–µ—Ä–Ω—É—Ç—å —Ç–∞–∫–æ–π –∫–æ–¥ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤–∏–¥–∞ `if (typeof window !== 'undefined')`.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ URL –∏ –¥–∞–Ω–Ω—ã–µ

–ò–∑ –∫–æ—Ä–æ–±–∫–∏ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –î–ª—è –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `prerender-urls.json`, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫ –∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ URL –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<App />`.

```json
[
  {
    "url": "/", // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    "title": "All About Dogs",
    "breeds": ["Shiba", "Golden", "Husky"]
  },
  {
    "url": "/breeds/shiba", // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ
    "title": "Shibas!",
    "photo": "/assets/shiba.jpg"
  }
]
```

### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä

–ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Ñ–∞–π–ª–∞ `prerender-urls.json`, –Ω–æ –∏ —á–µ—Ä–µ–∑ —Ñ–∞–π–ª JavaScript. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º–∞—è –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞.

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –∏–º—è —Ñ–∞–π–ª–∞ –≤ –∞—Ä–≥—É–º–µ–Ω—Ç–∞—Ö Preact CLI:

`preact build --prerenderUrls ./prerender-urls.js`

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `prerender-urls.js`:

```js
const breeds = ["Shiba", "Golden", "Husky"];

module.exports = function() {
  return [
    {
      url: "/",
      title: "All About Dogs",
      breeds
    },
    {
      url: "/breeds/shiba",
      title: "Shibas!",
      photo: "/assets/shiba.jpg",
      breeds
    }
  ];
};
```

### –í–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä –≤ —Å–≤—è–∑–∫–µ —Å–æ –≤–Ω–µ—à–Ω–∏–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –∏–∑ CMS –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–∞–∂–æ–≥–æ URL, –º—ã –º–æ–∂–µ–º —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ `prerender-urls.js`:

```js
module.exports = async function() {
  const response = await fetch('https://cms.example.com/pages/');
  const pages = await response.json();
  return pages.map(page => ({
    url: page.url,
    title: page.title,
    meta: page.meta,
    data: page.data
  }));
};
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞

–î–∞–Ω–Ω—ã–µ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∏–Ω–ª–∞–π–Ω —Å–∫—Ä–∏–ø—Ç:

```html
<script type="__PREACT_CLI_DATA__">{
  "preRenderData": {
    "url": "/",
    "photo": "/assets/shiba.jpg"
  }
}</script>
```

–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç—Ç–∏–º –¥–∞–Ω–Ω—ã–º –¥–ª—è —Ç.–Ω. "—Ä–µ–≥–∏–¥—Ä–∞—Ü–∏–∏" –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –î–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –æ—Å–æ–±–µ–Ω–Ω–æ —É–¥–æ–±–µ–Ω –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Å—Ç–µ–π—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞ (Redux) –∏–ª–∏ GraphQL.

> **üí° –°–æ–≤–µ—Ç:** –∫–æ–≥–¥–∞ –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—å –≤–ø–µ—Ä–≤—ã–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–∑–º–µ—Ç–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã - —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –Ω–∞ –¥—Ä—É–≥–∏–µ —Ä–æ—É—Ç—ã –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –±—É–¥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ñ–∞–π–ª `/<new-route>/preact_prerender_data.json` (Preact CLI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç—Ç–∏ —Ñ–∞–π–ª—ã –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏).

### `@preact/prerender-data-provider`

–î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –º—ã —Å–æ–∑–¥–∞–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∫–æ—Ç–æ—Ä–∞—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç –≥–∏–¥—Ä–∞—Ü–∏—é –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∑–∞ –í–∞—Å. –û–Ω–∞ –∏—â–µ—Ç –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ –∏–∑ –∏–Ω–ª–∞–π–Ω —Å–∫—Ä–∏–ø—Ç–∞ –∏–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ñ–∞–π–ª –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å–∞–º–æ–π —Ä–∞–∑–º–µ—Ç–∫–µ.

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏–∑ npm:

`npm i -D @preact/prerender-data-provider`

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ App (`components/app.js`):

```jsx
import { Provider } from '@preact/prerender-data-provider';

export default class App extends Component {
  // ...
  render(props) {
    return (
      <Provider value={props}>
        // –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
      </Provider>
    )
  }
}
```

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –ø—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∞ —Ä–æ—É—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `prerender-data-provider`:

```jsx
import { usePrerenderData } from '@preact/prerender-data-provider';

export default function MyRoute(props) {

  // –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö
  // –ø—Ä–∏ –ø–æ–º–æ—â–∏ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞: usePrerenderData(props, false);
  const [data, loading, error] = usePrerenderData(props);

  if (loading) return <h1>Loading...</h1>;

  if (error) return <p>Error: {error}</p>;

  return (
    <div>
      // –∏—Å–ø–æ–ª—å–∑—É–µ–º
    </div>
  );
}
```

–ü–µ—Ä–µ–¥–∞—á–∞ `false` –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤—ã–∫–ª—é—á–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–∞ `preact_prerender_data.json`. –ö—Ä–æ–º–µ —Ö—É–∫–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `<PrerenderData>`, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç —Ç–∞–∫—É—é –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—É.
